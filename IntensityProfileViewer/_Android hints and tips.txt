//
// Android hints and tips ...
//

Once you get it working, Uno on Android is *great* ! Performance is fine
either on a physical device or on the emulator, and you can set breakpoints
and do step-by-step debugging just as if the code was running natively
in Visual Studio.

It can take quite a bit of fiddling though to get all the ducks in a row.
Here's my shortlist of things to look out for.

- The Android Target SDK setting in 'AndroidManifest.xml' should match
  the SDK version on the device, or set up in the emulator.
  Visual Studio shows the currently selected 'target' alongside the green triangle
  in the menu strip, and this indicates the API level. You can change it via 
  the drop-down, which as well as offering various alternative targets, has an option
  to open the Android Device Manager.
  https://docs.microsoft.com/en-us/xamarin/android/app-fundamentals/android-api-levels?tabs=windows

- You can deploy to a physical device, but you have to first adjust its settings 
  to enable debugging via USB. Go to the Settings screen, find the 'About Phone'
  option, find the 'Build Number' (on my Samsung that was under a 'software information'
  tab), and then ... tap that seven times. Yeah, that's right.
  If developer mode was already enabled, the first tap will tell you. 
  Otherwise, after the 7th tap a popup appears, congratulations you're a Developer.

- Then you have to enable USB debugging on the device. Typically somewhere like
  Settings -> Developer Options

- Further info : https://docs.microsoft.com/en-us/xamarin/android/get-started/installation/set-up-device-for-development

- As soon as you plug in a suitably configured device, it starts to appear as a target
  in the Visual Studio menu, alongside the emulators that you've set up. It's not
  necessary to restart Visual Studio.

- Some blogs recommend that you plug the USB cable into a physical port on the PC,
  but I found that wasn't necessary - connecting via a USB hub worked fine.

- Here's a killer detail that took a lot of googling to find.
  In the Configuration Manager for the Solution, make sure that the 'Deploy'
  option for the Uno project is checked, as well as the 'Build' option.
  If 'Deploy' isn't checked there, when you build the Uno project and do
  Debug/Start-New-Instance, you get messages saying that the code is being deployed,
  and eventually a 'Deploy succeeded', but the app itself doesn't start. If your
  target is an emulator, the emulator will have fired up, but that's all.
  https://forums.xamarin.com/discussion/64088/android-emulator-opens-but-project-does-not-deploy-and-start

Hmm, trouble is, this ain't totally reliable.

Sometimes things just stop working :
  Emulated app runs really slowly
  Emulated app fails to start
  Visual Studio hangs up
  Emulator crashes ('quemu-system-x86_64.exe')

A restart of Visual Studio isn't sufficient, you need to reboot.

===================================

Viewer App - stuff that doesn't work properly in Droid :

  [ in the emulator, tablet_m-dpi_10_1_in_q_10_0_0_-api_29:5554 ]

  - When the Normalisation Mode is Automatic, the slider that adjusts
    the Normalisation value should be greyed-out. It doesn't respond
    to drags on the slider, but there's no visual indication.

  - When you enter an inappropriate value into a text field such as 'X position',
    the background should change colour to indicate the error.

  - If the virtual keyboard comes up, there's no way of dismissing it
    apart from disabling it from the 'keyboard' button

  - There are no tooltips (fair enough ?)

  - Dragging the cross hairs works fine.

  - Panning works fine.

  - Dragging and panning work fine with touch input as well as with the mouse.
  
  - Zooming with the mouse wheel is broken.
    Stepping the scroll wheel slowly, eg with a whole second between notches,
    has the effect of scrolling up or down. If you step the scroll wheel rapidly,
    quickly forward-and-back, you zoom in by a factor of 2x. You can repeat this
    a further two times to get a total magnification of 8x. 

  - To zoom in, another method is to double-click (or double-tap on a touch screen)
    which zooms you in by 2x centred on the touch point.

  - A two-finger 'pinch' gesture has no effect (you'd expect this to zoom in ?)

  - There seems to be no way to zoom back out via a mouse or touch gesture.
    The 'Reset Pan/Zoom' button works though.

  - ### BUG ?? When you drag the cross hairs, the blue highlighted lines on the profile graphs
    track the position ; but when you change the cross hair position via the sliders, 
    the blue lines don't track. 

  - ### The 'Reset Pan/Zoom' button is partly obscured, need to tweak the layout.




    

  





